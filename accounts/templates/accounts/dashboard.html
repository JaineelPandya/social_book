{% extends 'base/base.html' %}
{% load static %}

{% block title %}Dashboard - Social Book{% endblock %}

{% block extra_css %}
	<style>
		.sidebar {
			background-color: #1f2849;
			color: #fff;
			min-height: 100vh;
		}
		.sidebar-menu li a {
			color: #b8bfc7;
		}
		.sidebar-menu li a:hover {
			color: #4680ff;
		}
		.header {
			background-color: #fff;
			border-bottom: 1px solid #d9d9d9;
			padding: 1.5rem 0;
		}
		.page-wrapper {
			background-color: #f5f6fb;
			min-height: 100vh;
		}
		.card {
			border: 1px solid #e0e0e0;
			border-radius: 8px;
			box-shadow: 0 2px 4px rgba(0,0,0,0.08);
		}
		.card-header {
			background-color: #f5f6fb;
			border-bottom: 1px solid #e0e0e0;
			padding: 1rem;
			font-weight: 600;
		}
		.dashboard-header {
			flex: 1;
			min-width: 0;
		}
		.welcome-message {
			font-size: 1.75rem;
			font-weight: 700;
			color: #1f2849;
			margin: 0;
		}
		.user-info {
			flex-shrink: 0;
			margin-left: 2rem;
		}
		.stat-card {
			background: linear-gradient(135deg, #4680ff 0%, #3a6dd8 100%);
			color: white;
			padding: 2rem;
			border-radius: 8px;
			text-align: center;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
		}
		.stat-card.stat-card-2 {
			background: linear-gradient(135deg, #ff5370 0%, #dd3346 100%);
		}
		.stat-card.stat-card-3 {
			background: linear-gradient(135deg, #3bba9f 0%, #2fa08a 100%);
		}
		.stat-value {
			font-size: 2.5rem;
			font-weight: 700;
			display: block;
			margin-bottom: 0.5rem;
		}
		.stat-label {
			font-size: 0.875rem;
			opacity: 0.9;
			letter-spacing: 0.5px;
		}
		.card-body {
			padding: 1.5rem;
		}
	</style>
{% endblock %}

{% block content %}
<div class="page-wrapper">
	<!-- Header -->
	<div class="header">
		<div class="container-fluid">
			<div class="row align-items-center">
				<div class="col-sm-6">
					<div class="dashboard-header">
						<h1 class="welcome-message">Welcome back, {{ user.username }}!</h1>
					</div>
				</div>
				<div class="col-sm-6 text-right">
					<div class="user-info">
						<div class="dropdown">
							<button class="btn btn-secondary dropdown-toggle" type="button" id="userMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								<i class="dw dw-user"></i> {{ user.first_name|default:user.username }}
							</button>
							<div class="dropdown-menu dropdown-menu-right" aria-labelledby="userMenu">
								<a class="dropdown-item" href="{% url 'profile' %}">Profile</a>
								<a class="dropdown-item" href="#">Settings</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Main Content -->
	<div class="container-fluid pd-20 pd-sm-40">
		<!-- Stats Cards Row -->
		<div class="row mb-30">
			<!-- Stats Cards -->
			<div class="col-md-6 col-lg-3 mb-20">
				<div class="stat-card">
					<span class="stat-value">42</span>
					<span class="stat-label">Total Posts</span>
				</div>
			</div>
			<div class="col-md-6 col-lg-3 mb-20">
				<div class="stat-card stat-card-2">
					<span class="stat-value">128</span>
					<span class="stat-label">Total Followers</span>
				</div>
			</div>
			<div class="col-md-6 col-lg-3 mb-20">
				<div class="stat-card stat-card-3">
					<span class="stat-value">256</span>
					<span class="stat-label">Total Likes</span>
				</div>
			</div>
			<div class="col-md-6 col-lg-3 mb-20">
				<div class="stat-card" style="background: linear-gradient(135deg, #fdb366 0%, #f59a3a 100%);">
					<span class="stat-value">89</span>
					<span class="stat-label">Total Comments</span>
				</div>
			</div>
		</div>

		<!-- Activity & Users Row -->
		<div class="row">
			<div class="col-lg-8 mb-30">
				<div class="card">
					<div class="card-header">
						<h5 class="mb-0">Recent Activity</h5>
					</div>
					<div class="card-body">
						<div class="timeline">
							<div class="timeline-item mb-20">
								<div class="timeline-marker"></div>
								<div class="timeline-content">
									<h6 class="mb-2">New Post Created</h6>
									<p class="text-muted">You published a new post about web development</p>
									<small class="text-muted">2 hours ago</small>
								</div>
							</div>
							<div class="timeline-item mb-20">
								<div class="timeline-marker"></div>
								<div class="timeline-content">
									<h6 class="mb-2">New Follower</h6>
									<p class="text-muted">John Doe started following you</p>
									<small class="text-muted">5 hours ago</small>
								</div>
							</div>
							<div class="timeline-item">
								<div class="timeline-marker"></div>
								<div class="timeline-content">
									<h6 class="mb-2">Comment Received</h6>
									<p class="text-muted">You received a comment on your latest post</p>
									<small class="text-muted">1 day ago</small>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Suggested Users -->
			<div class="col-lg-4">
				<div class="card">
					<div class="card-header">
						<h5 class="mb-0">Suggested Users</h5>
					</div>
					<div class="card-body">
						<div class="suggested-user mb-15 pb-15 border-bottom">
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<h6 class="mb-2">Sarah Anderson</h6>
									<p class="text-muted small">Software Engineer</p>
								</div>
								<button class="btn btn-primary btn-sm">Follow</button>
							</div>
						</div>
						<div class="suggested-user mb-15 pb-15 border-bottom">
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<h6 class="mb-2">Mike Wilson</h6>
									<p class="text-muted small">Product Designer</p>
								</div>
								<button class="btn btn-primary btn-sm">Follow</button>
							</div>
						</div>
						<div class="suggested-user">
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<h6 class="mb-2">Emma Davis</h6>
									<p class="text-muted small">Marketing Manager</p>
								</div>
								<button class="btn btn-primary btn-sm">Follow</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<style>
	.timeline {
		position: relative;
		padding-left: 0;
	}
	.timeline-item {
		display: flex;
		margin-bottom: 0;
	}
	.timeline-marker {
		width: 12px;
		height: 12px;
		border-radius: 50%;
		background-color: #4680ff;
		margin-right: 20px;
		margin-top: 5px;
		flex-shrink: 0;
	}
	.timeline-content {
		flex: 1;
		min-width: 0;
	}
	.timeline-content h6 {
		color: #333;
		font-weight: 600;
		margin-bottom: 0.5rem;
		word-break: break-word;
	}
	.timeline-content p {
		margin-bottom: 0.5rem;
		word-break: break-word;
	}
	.dropdown-menu {
		border: 1px solid #d9d9d9;
		box-shadow: 0 2px 10px rgba(0,0,0,0.1);
		min-width: 180px;
	}
	.dropdown-menu .dropdown-item {
		padding: 0.75rem 1rem;
		color: #333;
	}
	.dropdown-menu .dropdown-item:hover {
		background-color: #f5f6fb;
		color: #4680ff;
	}
	.dropdown-divider {
		margin: 0.5rem 0;
		border-color: #e0e0e0;
	}
	.border-bottom {
		border-bottom: 1px solid #e0e0e0 !important;
	}
	.suggested-user h6 {
		font-size: 0.95rem;
		font-weight: 600;
		color: #1f2849;
	}
	.suggested-user .text-muted {
		font-size: 0.85rem;
	}
	.btn-primary.btn-sm {
		padding: 0.4rem 0.8rem;
		font-size: 0.85rem;
		white-space: nowrap;
	}
	
	/* Responsive adjustments */
	@media (max-width: 768px) {
		.welcome-message {
			font-size: 1.5rem;
		}
		.header {
			padding: 1rem 0;
		}
		.user-info {
			margin-left: 1rem;
		}
		.col-lg-4 {
			margin-top: 2rem;
		}
		.stat-card {
			padding: 1.5rem;
		}
		.stat-value {
			font-size: 2rem;
		}
	}
</style>
{% endblock %}
